{"version":3,"file":"init.js","sourceRoot":"","sources":["../../../../src/cli/services/update/init.ts"],"names":[],"mappings":"AAAA,OAAO,EAAC,WAAW,EAAC,MAAM,yCAAyC,CAAA;AACnE,OAAO,EAAC,UAAU,EAAC,MAAM,6BAA6B,CAAA;AACtD,OAAO,EAAC,UAAU,EAAE,SAAS,EAAC,MAAM,0BAA0B,CAAA;AAC9D,OAAO,EAAC,QAAQ,EAAE,YAAY,EAAC,MAAM,4BAA4B,CAAA;AACjE,OAAO,EAAC,aAAa,EAAC,MAAM,0BAA0B,CAAA;AAEtD,MAAM,CAAC,KAAK,UAAU,IAAI,CAAC,OAAgB;IACzC,MAAM,IAAI,GAAG,QAAQ,CAAC,OAAO,IAAI,GAAG,EAAE,uBAAuB,CAAC,CAAA;IAE9D,MAAM,YAAY,CAAC,IAAI,CAAC,CAAA;IAExB,aAAa,CAAC;QACZ,IAAI,EAAE,CAAC,QAAQ,YAAY,CAAC,GAAG,EAAE,IAAI,CAAC,4BAA4B,CAAC;KACpE,CAAC,CAAA;AACJ,CAAC;AAED,KAAK,UAAU,YAAY,CAAC,IAAY;IACtC,IAAI;QACF,IAAI,MAAM,UAAU,CAAC,IAAI,CAAC,EAAE;YAC1B,MAAM,OAAO,GAAG,YAAY,IAAI,kBAAkB,CAAA;YAElD,MAAM,IAAI,UAAU,CAAC,OAAO,CAAC,CAAA;SAC9B;QAED,MAAM,SAAS,CAAC,IAAI,EAAE,aAAa,EAAE,CAAC,CAAA;QAEtC,8DAA8D;KAC/D;IAAC,OAAO,KAAU,EAAE;QACnB,MAAM,OAAO,GAAG,QAAQ,YAAY,CAAC,GAAG,EAAE,IAAI,CAAC,+BAA+B,CAAA;QAC9E,MAAM,KAAK,GAAG,UAAU,KAAK,CAAC,OAAO,EAAE,CAAA;QAEvC,MAAM,IAAI,UAAU,CAAC,OAAO,EAAE,KAAK,CAAC,CAAA;KACrC;AACH,CAAC;AAED,SAAS,aAAa;IACpB,OAAO,IAAI,CAAC,SAAS,CACnB;QACE,OAAO,EAAE,WAAW;QACpB,UAAU,EAAE,EAAE;QACd,aAAa,EAAE,EAAE;QACjB,UAAU,EAAE,EAAE;KACf,EACD,IAAI,EACJ,CAAC,CACF,CAAA;AACH,CAAC","sourcesContent":["import {schemaUrlV1} from './schemas/update_extension_schema_v1.js'\nimport {AbortError} from '@shopify/cli-kit/node/error'\nimport {fileExists, writeFile} from '@shopify/cli-kit/node/fs'\nimport {joinPath, relativePath} from '@shopify/cli-kit/node/path'\nimport {renderSuccess} from '@shopify/cli-kit/node/ui'\n\nexport async function init(rawPath?: string) {\n  const path = joinPath(rawPath ?? '.', 'update_extension.json')\n\n  await createScript(path)\n\n  renderSuccess({\n    body: [`The '${relativePath('.', path)}' script has been created.`],\n  })\n}\n\nasync function createScript(path: string) {\n  try {\n    if (await fileExists(path)) {\n      const message = `The file ${path} already exists.`\n\n      throw new AbortError(message)\n    }\n\n    await writeFile(path, initialScript())\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  } catch (error: any) {\n    const message = `The '${relativePath('.', path)}' script couldn't be created.`\n    const cause = `Cause: ${error.message}`\n\n    throw new AbortError(message, cause)\n  }\n}\n\nfunction initialScript() {\n  return JSON.stringify(\n    {\n      $schema: schemaUrlV1,\n      theme_name: '',\n      theme_version: '',\n      operations: [],\n    },\n    null,\n    2,\n  )\n}\n"]}